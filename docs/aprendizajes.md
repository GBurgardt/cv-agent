# Aprendizajes recientes (CV Agent)

- Tokens: llegamos a tener una rutina para recortar historial según presupuesto, pero la eliminamos; ahora confiamos en `gpt-5-codex` y en prompts más claros, monitoreando manualmente si el contexto se acerca al límite.
- Template completo: el HTML original ignoraba sections clave (Skills/Industries/Education/Experience) y ocupaba dos páginas; rediseñar el layout y exigir que el agente rellene todas las claves nos ayudó a detectar huecos en la extracción (todavía falta poblar algunos campos en los datos de origen).
- Simplificar herramientas: eliminar preview/export y quedarnos sólo con `fill_docx_template` hizo que el flujo sea más determinista; cualquier payload vacío ahora falla rápido, así que el prompt debe explicar con precisión cómo construir `fields`.
- Conversión a documento editable: mantener el layout en DOCX requiere elegir la herramienta correcta. LibreOffice headless convierte el PDF perfecto a DOCX casi sin pérdidas (pero hay que instalarlo). Las librerías Node (`html-to-docx`, `html-docx-js`) funcionan si simplificamos el HTML y estilos; para máxima fidelidad sin instalaciones también existen servicios SaaS (Aspose/ConvertAPI), aunque dependen de la red y costos.
